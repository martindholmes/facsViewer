<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: FacsViewer</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: FacsViewer</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>FacsViewer<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="FacsViewer"><span class="type-signature"></span>new FacsViewer<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This class is instantiated with a single parameter
which is the URI of the folder whose image list it will retrieve,
and whose images it will display. That property can also be set on
the fly, causing the object to display a different set of images.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line34">line 34</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~getListing"><span class="type-signature">(inner) </span>getListing<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This uses fetch to retrieve a listing from the server at the
specified URL in this.folder, and then calls render() to build the
viewer.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line213">line 213</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~imageLoaded"><span class="type-signature">(inner) </span>imageLoaded<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Called by each individual image when its content
             has loaded, so that overall loading can be tracked.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line130">line 130</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~loadJSON"><span class="type-signature">(inner) </span>loadJSON<span class="signature">(uri)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Retrieves a JSON string from a URL, then calls readJSON to
parse its properties and show the results.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>uri</code></td>
            

            <td class="type">
            
                
<span class="param-type">URI</span>


            
            </td>

            

            

            <td class="description last">The URI from which to retrieve the string.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line156">line 156</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~parseListing"><span class="type-signature">(inner) </span>parseListing<span class="signature">(listing)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This processes the listing to create an array of image
URLs for display. It needs to be robust against various configurations
of listings page HTML. It then calls the render function to display
the results.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>listing</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">a string version of the page returned by the
server. We treat it as text because it's unlikely to be well-formed.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line237">line 237</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~readJSON"><span class="type-signature">(inner) </span>readJSON<span class="signature">(strJSON)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Loads image and subfolder information from a JSON string.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>strJSON</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The unparsed JSON string.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line168">line 168</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~render"><span class="type-signature">(inner) </span>render<span class="signature">(startFrom, direction, targId)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This is the meat of the viewer. It processes a server index
listing or a JSON-configured listing to render a facsimile viewer on the page.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>startFrom</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">the point in the images array from which to start
                           rendering. Defaults to 0, which means to start 
                           from the beginning.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>direction</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">the direction to go from the starting point. We may
                           be moving forward or backward through the image set.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">a target id to display after the images have been 
                           inserted. Defaults to the class's targId property,
                           which is set on load from the location hash.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line265">line 265</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~reportError"><span class="type-signature">(inner) </span>reportError<span class="signature">(msg)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Simple error reporting mechanism for informing the user.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The error message to report.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line570">line 570</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~repositionImage"><span class="type-signature">(inner) </span>repositionImage<span class="signature">(divId)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Function to move an image container so that its top
and left are onscreen, making the whole image available for scrolling.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>divId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The id of the div containing the image.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line537">line 537</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~resetImage"><span class="type-signature">(inner) </span>resetImage<span class="signature">(divId)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Function to reset the size and orientation of an image
to its default.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>divId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The id of the div containing the image.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line555">line 555</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~rotateImage"><span class="type-signature">(inner) </span>rotateImage<span class="signature">(divId)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Function to rotate an image by 90 degrees. This reads the
current value of the transform property, parses out the rotation bit
(if it's there), increments it and puts it back.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>divId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The id of the div containing the image.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line486">line 486</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~scaleImage"><span class="type-signature">(inner) </span>scaleImage<span class="signature">(divId, enlarge)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Function to scale an image by a positive or negative .02.
This parses out the current value of the scale factor from the transform
property, then changes it appropriately.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>divId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The id of the div containing the image.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>enlarge</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Boolean value to specify whether to enlarge or shrink.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line510">line 510</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="~setFolder"><span class="type-signature">(inner) </span>setFolder<span class="signature">(folder)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sets the folder to browse, and kicks off the process of
retrieving listings from the server and displaying them.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>folder</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The URL of the folder.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="FacsViewer.js.html">FacsViewer.js</a>, <a href="FacsViewer.js.html#line145">line 145</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FacsViewer.html">FacsViewer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Tue Apr 28 2020 16:24:46 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>